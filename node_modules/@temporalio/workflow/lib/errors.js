"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isCancellation = exports.DeterminismViolationError = exports.WorkflowError = void 0;
/**
 * Base class for all workflow errors
 */
class WorkflowError extends Error {
    constructor() {
        super(...arguments);
        this.name = 'WorkflowError';
    }
}
exports.WorkflowError = WorkflowError;
/**
 * Thrown in workflow when it tries to do something that non-deterministic such as construct a WeakRef()
 */
class DeterminismViolationError extends WorkflowError {
    constructor() {
        super(...arguments);
        this.name = 'DeterminismViolationError';
    }
}
exports.DeterminismViolationError = DeterminismViolationError;
function looksLikeError(err) {
    return typeof err === 'object' && err != null && Object.prototype.hasOwnProperty.call(err, 'name');
}
/**
 * Returns whether provided `err` is caused by cancellation
 */
function isCancellation(err) {
    if (!looksLikeError(err))
        return false;
    return (err.name === 'CancelledFailure' ||
        ((err.name === 'ActivityFailure' || err.name === 'ChildWorkflowFailure') &&
            looksLikeError(err.cause) &&
            err.cause.name === 'CancelledFailure'));
}
exports.isCancellation = isCancellation;
//# sourceMappingURL=errors.js.map